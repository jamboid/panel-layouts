/*!
 * EventEmitter v4.2.4 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */
(function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function e(){return this[t].apply(this,arguments)}}var n=t.prototype;n.getListeners=function r(t){var e=this._getEvents(),i,n;if("object"==typeof t){i={};for(n in e)e.hasOwnProperty(n)&&t.test(n)&&(i[n]=e[n])}else i=e[t]||(e[t]=[]);return i},n.flattenListeners=function a(t){var e=[],i;for(i=0;i<t.length;i+=1)e.push(t[i].listener);return e},n.getListenersAsObject=function s(t){var e=this.getListeners(t),i;return e instanceof Array&&(i={},i[t]=e),i||e},n.addListener=function o(t,i){var n=this.getListenersAsObject(t),r="object"==typeof i,a;for(a in n)n.hasOwnProperty(a)&&-1===e(n[a],i)&&n[a].push(r?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function u(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function l(t){return this.getListeners(t),this},n.defineEvents=function c(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function d(t,i){var n=this.getListenersAsObject(t),r,a;for(a in n)n.hasOwnProperty(a)&&(r=e(n[a],i),-1!==r&&n[a].splice(r,1));return this},n.off=i("removeListener"),n.addListeners=function h(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function f(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function p(t,e,i){var n,r,a=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)a.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(r=e[n])&&("function"==typeof r?a.call(this,n,r):s.call(this,n,r));return this},n.removeEvent=function g(t){var e=typeof t,i=this._getEvents(),n;if("string"===e)delete i[t];else if("object"===e)for(n in i)i.hasOwnProperty(n)&&t.test(n)&&delete i[n];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function v(t,e){var i=this.getListenersAsObject(t),n,r,a,s;for(a in i)if(i.hasOwnProperty(a))for(r=i[a].length;r--;)n=i[a][r],n.once===!0&&this.removeListener(t,n.listener),s=n.listener.apply(this,e||[]),s===this._getOnceReturnValue()&&this.removeListener(t,n.listener);return this},n.trigger=i("emitEvent"),n.emit=function m(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function y(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function b(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},n._getEvents=function w(){return this._events||(this._events={})},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}).call(this),function(t){var e=document.documentElement,i=function(){};e.addEventListener?i=function(t,e,i){t.addEventListener(e,i,!1)}:e.attachEvent&&(i=function(e,i,n){e[i+n]=n.handleEvent?function(){var e=t.event;e.target=e.target||e.srcElement,n.handleEvent.call(n,e)}:function(){var i=t.event;i.target=i.target||i.srcElement,n.call(e,i)},e.attachEvent("on"+i,e[i+n])});var n=function(){};e.removeEventListener?n=function(t,e,i){t.removeEventListener(e,i,!1)}:e.detachEvent&&(n=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=void 0}});var r={bind:i,unbind:n};"function"==typeof define&&define.amd?define("eventie/eventie",r):t.eventie=r}(this),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===o.call(t)}function n(t){var e=[];if(i(t))e=t;else if("number"==typeof t.length)for(var n=0,r=t.length;r>n;n++)e.push(t[n]);else e.push(t);return e}function r(t,i){function r(t,i,a){if(!(this instanceof r))return new r(t,i);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=e({},this.options),"function"==typeof i?a=i:e(this.options,i),a&&this.on("always",a),this.getImages(),$&&(this.jqDeferred=new $.Deferred);var s=this;setTimeout(function(){s.check()})}function o(t){this.img=t}r.prototype=new t,r.prototype.options={},r.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;e>t;t++){var i=this.elements[t];"IMG"===i.nodeName&&this.addImage(i);for(var n=i.querySelectorAll("img"),r=0,a=n.length;a>r;r++){var s=n[r];this.addImage(s)}}},r.prototype.addImage=function(t){var e=new o(t);this.images.push(e)},r.prototype.check=function(){function t(t,r){return e.options.debug&&s&&a.log("confirm",t,r),e.progress(t),i++,i===n&&e.complete(),!0}var e=this,i=0,n=this.images.length;if(this.hasAnyBroken=!1,!n)return void this.complete();for(var r=0;n>r;r++){var o=this.images[r];o.on("confirm",t),o.check()}},r.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify(e,t)})},r.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var e=this;setTimeout(function(){if(e.emit(t,e),e.emit("always",e),e.jqDeferred){var i=e.hasAnyBroken?"reject":"resolve";e.jqDeferred[i](e)}})},$&&($.fn.imagesLoaded=function(t,e){var i=new r(this,t,e);return i.jqDeferred.promise($(this))});var u={};return o.prototype=new t,o.prototype.check=function(){var t=u[this.img.src];if(t)return void this.useCached(t);if(u[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this.proxyImage=new Image;i.bind(e,"load",this),i.bind(e,"error",this),e.src=this.img.src},o.prototype.useCached=function(t){if(t.isConfirmed)this.confirm(t.isLoaded,"cached was confirmed");else{var e=this;t.on("confirm",function(t){return e.confirm(t.isLoaded,"cache emitted confirmed"),!0})}},o.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},o.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},o.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindProxyEvents()},o.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindProxyEvents()},o.prototype.unbindProxyEvents=function(){i.unbind(this.proxyImage,"load",this),i.unbind(this.proxyImage,"error",this)},r}var $=t.jQuery,a=t.console,s="undefined"!=typeof a,o=Object.prototype.toString;"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],r):t.imagesLoaded=r(t.EventEmitter,t.eventie)}(window),function($){var t=$.event,e,i;e=t.special.debouncedresize={setup:function(){$(this).on("resize",e.handler)},teardown:function(){$(this).off("resize",e.handler)},handler:function(n,r){var a=this,s=arguments,o=function(){n.type="debouncedresize",t.dispatch.apply(a,s)};i&&clearTimeout(i),r?o():i=setTimeout(o,e.threshold)},threshold:150}}(jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,i,n,r){return jQuery.easing[jQuery.easing.def](t,e,i,n,r)},easeInQuad:function(t,e,i,n,r){return n*(e/=r)*e+i},easeOutQuad:function(t,e,i,n,r){return-n*(e/=r)*(e-2)+i},easeInOutQuad:function(t,e,i,n,r){return(e/=r/2)<1?n/2*e*e+i:-n/2*(--e*(e-2)-1)+i},easeInCubic:function(t,e,i,n,r){return n*(e/=r)*e*e+i},easeOutCubic:function(t,e,i,n,r){return n*((e=e/r-1)*e*e+1)+i},easeInOutCubic:function(t,e,i,n,r){return(e/=r/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},easeInQuart:function(t,e,i,n,r){return n*(e/=r)*e*e*e+i},easeOutQuart:function(t,e,i,n,r){return-n*((e=e/r-1)*e*e*e-1)+i},easeInOutQuart:function(t,e,i,n,r){return(e/=r/2)<1?n/2*e*e*e*e+i:-n/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(t,e,i,n,r){return n*(e/=r)*e*e*e*e+i},easeOutQuint:function(t,e,i,n,r){return n*((e=e/r-1)*e*e*e*e+1)+i},easeInOutQuint:function(t,e,i,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+i:n/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(t,e,i,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+i},easeOutSine:function(t,e,i,n,r){return n*Math.sin(e/r*(Math.PI/2))+i},easeInOutSine:function(t,e,i,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+i},easeInExpo:function(t,e,i,n,r){return 0==e?i:n*Math.pow(2,10*(e/r-1))+i},easeOutExpo:function(t,e,i,n,r){return e==r?i+n:n*(-Math.pow(2,-10*e/r)+1)+i},easeInOutExpo:function(t,e,i,n,r){return 0==e?i:e==r?i+n:(e/=r/2)<1?n/2*Math.pow(2,10*(e-1))+i:n/2*(-Math.pow(2,-10*--e)+2)+i},easeInCirc:function(t,e,i,n,r){return-n*(Math.sqrt(1-(e/=r)*e)-1)+i},easeOutCirc:function(t,e,i,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+i},easeInOutCirc:function(t,e,i,n,r){return(e/=r/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+i:n/2*(Math.sqrt(1-(e-=2)*e)+1)+i},easeInElastic:function(t,e,i,n,r){var a=1.70158,s=0,o=n;if(0==e)return i;if(1==(e/=r))return i+n;if(s||(s=.3*r),o<Math.abs(n)){o=n;var a=s/4}else var a=s/(2*Math.PI)*Math.asin(n/o);return-(o*Math.pow(2,10*(e-=1))*Math.sin(2*(e*r-a)*Math.PI/s))+i},easeOutElastic:function(t,e,i,n,r){var a=1.70158,s=0,o=n;if(0==e)return i;if(1==(e/=r))return i+n;if(s||(s=.3*r),o<Math.abs(n)){o=n;var a=s/4}else var a=s/(2*Math.PI)*Math.asin(n/o);return o*Math.pow(2,-10*e)*Math.sin(2*(e*r-a)*Math.PI/s)+n+i},easeInOutElastic:function(t,e,i,n,r){var a=1.70158,s=0,o=n;if(0==e)return i;if(2==(e/=r/2))return i+n;if(s||(s=.3*r*1.5),o<Math.abs(n)){o=n;var a=s/4}else var a=s/(2*Math.PI)*Math.asin(n/o);return 1>e?-.5*o*Math.pow(2,10*(e-=1))*Math.sin(2*(e*r-a)*Math.PI/s)+i:o*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*r-a)*Math.PI/s)*.5+n+i},easeInBack:function(t,e,i,n,r,a){return void 0==a&&(a=1.70158),n*(e/=r)*e*((a+1)*e-a)+i},easeOutBack:function(t,e,i,n,r,a){return void 0==a&&(a=1.70158),n*((e=e/r-1)*e*((a+1)*e+a)+1)+i},easeInOutBack:function(t,e,i,n,r,a){return void 0==a&&(a=1.70158),(e/=r/2)<1?n/2*e*e*(((a*=1.525)+1)*e-a)+i:n/2*((e-=2)*e*(((a*=1.525)+1)*e+a)+2)+i},easeInBounce:function(t,e,i,n,r){return n-jQuery.easing.easeOutBounce(t,r-e,0,n,r)+i},easeOutBounce:function(t,e,i,n,r){return(e/=r)<1/2.75?7.5625*n*e*e+i:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+i:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+i:n*(7.5625*(e-=2.625/2.75)*e+.984375)+i},easeInOutBounce:function(t,e,i,n,r){return r/2>e?.5*jQuery.easing.easeInBounce(t,2*e,0,n,r)+i:.5*jQuery.easing.easeOutBounce(t,2*e-r,0,n,r)+.5*n+i}}),function($){$.fn.fitText=function(t,e){var i=t||1,n=$.extend({minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY},e);return this.each(function(){var t=$(this),e=function(){t.css("font-size",Math.max(Math.min(t.width()/(10*i),parseFloat(n.maxFontSize)),parseFloat(n.minFontSize)))};e(),$(window).on("resize.fittext orientationchange.fittext",e)})}}(jQuery),function($){"use strict";var t={},e={},i=!1,n=function(t){return t.slice(0)};$.subscribe=function(i,n,r){var a,s={};return r=r||e,"string"===$.type(i)&&$.isFunction(n)?(a=i.split(" "),$.each(a,function(e,i){return""===i||s[i]?!0:(s[i]=!0,t[i]||(t[i]=[]),void t[i].push([n,r]))}),{topics:i,callback:n,context:r}):null},$.unsubscribe=function(i,n,r){var a,s={};return i&&("string"===$.type(i)||i.topics&&"string"===$.type(i.topics))?(i.topics&&(n=n||i.callback,r=r||i.context,i=i.topics),r=r||e,a=i.split(" "),$.each(a,function(e,i){var a=t[i];return""===i||!a||s[i]?!0:(s[i]=!0,void(n&&$.isFunction(n)?$.each(a,function(t,e){return e[0]===n&&e[1]===r?(a.splice(t,1),!1):void 0}):delete t[i]))}),$):$},$.publish=function(e,i){if(!e||"string"!==$.type(e))return $;var r=e.split(" ");return $.each(r,function(e,r){if(""===r)return!0;if(t[r]){var a=n(t[r]);$.each(a,function(t,e){e[0].call(e[1],r,i)})}}),$}}(jQuery),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=t.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function n(){var n,r;return i.settings.submitHandler?(i.submitButton&&(n=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),r=i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&n.remove(),void 0!==r?r:!1):!0}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){var e,i;return t(this[0]).is("form")?e=this.validate().form():(e=!0,i=t(this[0].form).validate(),this.each(function(){e=i.element(this)&&e})),e},removeAttrs:function(e){var i={},n=this;return t.each(e.split(/\s/),function(t,e){i[e]=n.attr(e),n.removeAttr(e)}),i},rules:function(e,i){var n,r,a,s,o,u,l=this[0];if(e)switch(n=t.data(l.form,"validator").settings,r=n.rules,a=t.validator.staticRules(l),e){case"add":t.extend(a,t.validator.normalizeRule(i)),delete a.messages,r[l.name]=a,i.messages&&(n.messages[l.name]=t.extend(n.messages[l.name],i.messages));break;case"remove":return i?(u={},t.each(i.split(/\s/),function(e,i){u[i]=a[i],delete a[i],"required"===i&&t(l).removeAttr("aria-required")}),u):(delete r[l.name],a)}return s=t.validator.normalizeRules(t.extend({},t.validator.classRules(l),t.validator.attributeRules(l),t.validator.dataRules(l),t.validator.staticRules(l)),l),s.required&&(o=s.required,delete s.required,s=t.extend({required:o},s),t(l).attr("aria-required","true")),s.remote&&(o=s.remote,delete s.remote,s=t.extend(s,{remote:o})),s}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(n):t(e).addClass(i).removeClass(n)},unhighlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(n):t(e).removeClass(i).addClass(n)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),n="on"+e.type.replace(/^validate/,""),r=i.settings;r[n]&&!this.is(r.ignore)&&r[n].call(i,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,n=this.groups={};t.each(this.settings.groups,function(e,i){"string"==typeof i&&(i=i.split(/\s/)),t.each(i,function(t,i){n[i]=e})}),i=this.settings.rules,t.each(i,function(e,n){i[e]=t.validator.normalizeRule(n)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",e).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var i=this.clean(e),n=this.validationTargetFor(i),r=!0;return this.lastElement=n,void 0===n?delete this.invalid[i.name]:(this.prepareElement(n),this.currentElements=t(n),r=this.check(n)!==!1,r?delete this.invalid[n.name]:this.invalid[n.name]=!0),t(e).attr("aria-invalid",!r),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),r},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,i=0;for(e in t)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!e.objectLength(t(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i,n=t(e),r=e.type;return"radio"===r||"checkbox"===r?t("input[name='"+e.name+"']:checked").val():"number"===r&&"undefined"!=typeof e.validity?e.validity.badInput?!1:n.val():(i=n.val(),"string"==typeof i?i.replace(/\r/g,""):i)},check:function(e){e=this.validationTargetFor(this.clean(e));var i,n,r,a=t(e).rules(),s=t.map(a,function(t,e){return e}).length,o=!1,u=this.elementValue(e);for(n in a){r={method:n,parameters:a[n]};try{if(i=t.validator.methods[n].call(this,u,e,r.parameters),"dependency-mismatch"===i&&1===s){o=!0;continue}if(o=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!i)return this.formatAndAdd(e,r),!1}catch(l){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+r.method+"' method.",l),l}}return o?void 0:(this.objectLength(a)&&this.successList.push(e),!0)},customDataMessage:function(e,i){return t(e).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t];return void 0},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var n=this.defaultMessage(e,i.method),r=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,e):r.test(n)&&(n=t.validator.format(n.replace(r,"{$1}"),i.parameters)),this.errorList.push({message:n,element:e,method:i.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var n,r,a,s=this.errorsFor(e),o=this.idOrName(e),u=t(e).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(i)):(s=t("<"+this.settings.errorElement+">").attr("id",o+"-error").addClass(this.settings.errorClass).html(i||""),n=s,this.settings.wrapper&&(n=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement(n,t(e)):n.insertAfter(e),s.is("label")?s.attr("for",o):0===s.parents("label[for='"+o+"']").length&&(a=s.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),u?u.match(new RegExp("\\b"+a+"\\b"))||(u+=" "+a):u=a,t(e).attr("aria-describedby",u),r=this.groups[e.name],r&&t.each(this.groups,function(e,i){i===r&&t("[name='"+e+"']",this.currentForm).attr("aria-describedby",s.attr("id"))}))),!i&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,e)),this.toShow=this.toShow.add(s)},errorsFor:function(e){var i=this.idOrName(e),n=t(e).attr("aria-describedby"),r="label[for='"+i+"'], label[for='"+i+"'] *";return n&&(r=r+", #"+n.replace(/\s+/g,", #")),this.errors().filter(r)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},n=t(e).attr("class");return n&&t.each(n.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i,n,r={},a=t(e),s=e.getAttribute("type");for(i in t.validator.methods)"required"===i?(n=e.getAttribute(i),""===n&&(n=!0),n=!!n):n=a.attr(i),/min|max/.test(i)&&(null===s||/number|range|text/.test(s))&&(n=Number(n)),n||0===n?r[i]=n:s===i&&"range"!==s&&(r[i]=!0);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(e){var i,n,r={},a=t(e);for(i in t.validator.methods)n=a.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),void 0!==n&&(r[i]=n);return r},staticRules:function(e){var i={},n=t.data(e.form,"validator");return n.settings.rules&&(i=t.validator.normalizeRule(n.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(n,r){if(r===!1)return void delete e[n];if(r.param||r.depends){var a=!0;switch(typeof r.depends){case"string":a=!!t(r.depends,i.form).length;break;case"function":a=r.depends.call(i,i)}a?e[n]=void 0!==r.param?r.param:!0:delete e[n]}}),t.each(e,function(n,r){e[n]=t.isFunction(r)?r(i):r}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,n){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==n?n:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var r=t(i).val();return r&&r.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i,n,r=0,a=0,s=!1;if(t=t.replace(/\D/g,""),t.length<13||t.length>19)return!1;for(i=t.length-1;i>=0;i--)n=t.charAt(i),a=parseInt(n,10),s&&(a*=2)>9&&(a-=9),r+=a,s=!s;return r%10===0},minlength:function(e,i,n){var r=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||r>=n},maxlength:function(e,i,n){var r=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||n>=r},rangelength:function(e,i,n){var r=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||r>=n[0]&&r<=n[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(e,i,n){var r=t(n);return this.settings.onfocusout&&r.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===r.val()},remote:function(e,i,n){if(this.optional(i))return"dependency-mismatch";var r,a,s=this.previousValue(i);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),s.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=s.message,n="string"==typeof n&&{url:n}||n,s.old===e?s.valid:(s.old=e,r=this,this.startRequest(i),a={},a[i.name]=e,t.ajax(t.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:a,context:r.currentForm,success:function(n){var a,o,u,l=n===!0||"true"===n;r.settings.messages[i.name].remote=s.originalMessage,
l?(u=r.formSubmitted,r.prepareElement(i),r.formSubmitted=u,r.successList.push(i),delete r.invalid[i.name],r.showErrors()):(a={},o=n||r.defaultMessage(i,"remote"),a[i.name]=s.message=t.isFunction(o)?o(e):o,r.invalid[i.name]=!0,r.showErrors(a)),s.valid=l,r.stopRequest(i,l)}},n)),"pending")}}}),t.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var e,i={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,n){var r=t.port;"abort"===t.mode&&(i[r]&&i[r].abort(),i[r]=n)}):(e=t.ajax,t.ajax=function(n){var r=("mode"in n?n:t.ajaxSettings).mode,a=("port"in n?n:t.ajaxSettings).port;return"abort"===r?(i[a]&&i[a].abort(),i[a]=e.apply(this,arguments),i[a]):e.apply(this,arguments)}),t.extend(t.fn,{validateDelegate:function(e,i,n){return this.bind(i,function(i){var r=t(i.target);return r.is(e)?n.apply(r,arguments):void 0})}})}),!function(t,e,i,n){"use strict";function r(t,e,i){return setTimeout(c(t,i),e)}function a(t,e,i){return Array.isArray(t)?(s(t,i[e],i),!0):!1}function s(t,e,i){var r;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==n)for(r=0;r<t.length;)e.call(i,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(i,t[r],r,t)}function o(t,e,i){for(var r=Object.keys(e),a=0;a<r.length;)(!i||i&&t[r[a]]===n)&&(t[r[a]]=e[r[a]]),a++;return t}function u(t,e){return o(t,e,!0)}function l(t,e,i){var n,r=e.prototype;n=t.prototype=Object.create(r),n.constructor=t,n._super=r,i&&o(n,i)}function c(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==ct?t.apply(e?e[0]||n:n,e):t}function h(t,e){return t===n?e:t}function f(t,e,i){s(m(e),function(e){t.addEventListener(e,i,!1)})}function p(t,e,i){s(m(e),function(e){t.removeEventListener(e,i,!1)})}function g(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function v(t,e){return t.indexOf(e)>-1}function m(t){return t.trim().split(/\s+/g)}function y(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function b(t){return Array.prototype.slice.call(t,0)}function w(t,e,i){for(var n=[],r=[],a=0;a<t.length;){var s=e?t[a][e]:t[a];y(r,s)<0&&n.push(t[a]),r[a]=s,a++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function S(t,e){for(var i,r,a=e[0].toUpperCase()+e.slice(1),s=0;s<ut.length;){if(i=ut[s],r=i?i+a:e,r in t)return r;s++}return n}function C(){return pt++}function F(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}function x(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&i.handler(e)},this.init()}function E(t){var e,i=t.options.inputClass;return new(e=i?i:mt?j:yt?V:vt?W:R)(t,T)}function T(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,a=e&xt&&n-r===0,s=e&(Tt|It)&&n-r===0;i.isFirst=!!a,i.isFinal=!!s,a&&(t.session={}),i.eventType=e,I(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function I(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=M(e)),r>1&&!i.firstMultiple?i.firstMultiple=M(e):1===r&&(i.firstMultiple=!1);var a=i.firstInput,s=i.firstMultiple,o=s?s.center:a.center,u=e.center=L(n);e.timeStamp=ft(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=P(o,u),e.distance=A(o,u),D(i,e),e.offsetDirection=q(e.deltaX,e.deltaY),e.scale=s?z(s.pointers,n):1,e.rotation=s?O(s.pointers,n):0,k(i,e);var l=t.element;g(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function D(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},a=t.prevInput||{};(e.eventType===xt||a.eventType===Tt)&&(r=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}function k(t,e){var i,r,a,s,o=t.lastInterval||e,u=e.timeStamp-o.timeStamp;if(e.eventType!=It&&(u>Ft||o.velocity===n)){var l=o.deltaX-e.deltaX,c=o.deltaY-e.deltaY,d=_(u,l,c);r=d.x,a=d.y,i=ht(d.x)>ht(d.y)?d.x:d.y,s=q(l,c),t.lastInterval=e}else i=o.velocity,r=o.velocityX,a=o.velocityY,s=o.direction;e.velocity=i,e.velocityX=r,e.velocityY=a,e.direction=s}function M(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:dt(t.pointers[i].clientX),clientY:dt(t.pointers[i].clientY)},i++;return{timeStamp:ft(),pointers:e,center:L(e),deltaX:t.deltaX,deltaY:t.deltaY}}function L(t){var e=t.length;if(1===e)return{x:dt(t[0].clientX),y:dt(t[0].clientY)};for(var i=0,n=0,r=0;e>r;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:dt(i/e),y:dt(n/e)}}function _(t,e,i){return{x:e/t||0,y:i/t||0}}function q(t,e){return t===e?Dt:ht(t)>=ht(e)?t>0?kt:Mt:e>0?Lt:_t}function A(t,e,i){i||(i=Ot);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function P(t,e,i){i||(i=Ot);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function O(t,e){return P(e[1],e[0],zt)-P(t[1],t[0],zt)}function z(t,e){return A(e[0],e[1],zt)/A(t[0],t[1],zt)}function R(){this.evEl=jt,this.evWin=Nt,this.allow=!0,this.pressed=!1,x.apply(this,arguments)}function j(){this.evEl=Ht,this.evWin=Wt,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$t,this.evWin=Yt,this.started=!1,x.apply(this,arguments)}function Q(t,e){var i=b(t.touches),n=b(t.changedTouches);return e&(Tt|It)&&(i=w(i.concat(n),"identifier",!0)),[i,n]}function V(){this.evTarget=Xt,this.targetIds={},x.apply(this,arguments)}function H(t,e){var i=b(t.touches),n=this.targetIds;if(e&(xt|Et)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,a,s=b(t.changedTouches),o=[],u=this.target;if(a=i.filter(function(t){return g(t.target,u)}),e===xt)for(r=0;r<a.length;)n[a[r].identifier]=!0,r++;for(r=0;r<s.length;)n[s[r].identifier]&&o.push(s[r]),e&(Tt|It)&&delete n[s[r].identifier],r++;return o.length?[w(a.concat(o),"identifier",!0),o]:void 0}function W(){x.apply(this,arguments);var t=c(this.handler,this);this.touch=new V(this.manager,t),this.mouse=new R(this.manager,t)}function B(t,e){this.manager=t,this.set(e)}function Y(t){if(v(t,ee))return ee;var e=v(t,ie),i=v(t,ne);return e&&i?ie+" "+ne:e||i?e?ie:ne:v(t,te)?te:Kt}function U(t){this.id=C(),this.manager=null,this.options=u(t||{},this.defaults),this.options.enable=h(this.options.enable,!0),this.state=re,this.simultaneous={},this.requireFail=[]}function X(t){return t&le?"cancel":t&oe?"end":t&se?"move":t&ae?"start":""}function Z(t){return t==_t?"down":t==Lt?"up":t==kt?"left":t==Mt?"right":""}function G(t,e){var i=e.manager;return i?i.get(t):t}function J(){U.apply(this,arguments)}function $(){J.apply(this,arguments),this.pX=null,this.pY=null}function K(){J.apply(this,arguments)}function tt(){U.apply(this,arguments),this._timer=null,this._input=null}function et(){J.apply(this,arguments)}function it(){J.apply(this,arguments)}function nt(){U.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function rt(t,e){return e=e||{},e.recognizers=h(e.recognizers,rt.defaults.preset),new at(t,e)}function at(t,e){e=e||{},this.options=u(e,rt.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=E(this),this.touchAction=new B(this,this.options.touchAction),st(this,!0),s(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function st(t,e){var i=t.element;s(t.options.cssProps,function(t,n){i.style[S(i.style,n)]=e?t:""})}function ot(t,i){var n=e.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}var ut=["","webkit","moz","MS","ms","o"],lt=e.createElement("div"),ct="function",dt=Math.round,ht=Math.abs,ft=Date.now,pt=1,gt=/mobile|tablet|ip(ad|hone|od)|android/i,vt="ontouchstart"in t,mt=S(t,"PointerEvent")!==n,yt=vt&&gt.test(navigator.userAgent),bt="touch",wt="pen",St="mouse",Ct="kinect",Ft=25,xt=1,Et=2,Tt=4,It=8,Dt=1,kt=2,Mt=4,Lt=8,_t=16,qt=kt|Mt,At=Lt|_t,Pt=qt|At,Ot=["x","y"],zt=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(F(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(F(this.element),this.evWin,this.domHandler)}};var Rt={mousedown:xt,mousemove:Et,mouseup:Tt},jt="mousedown",Nt="mousemove mouseup";l(R,x,{handler:function(t){var e=Rt[t.type];e&xt&&0===t.button&&(this.pressed=!0),e&Et&&1!==t.which&&(e=Tt),this.pressed&&this.allow&&(e&Tt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:St,srcEvent:t}))}});var Qt={pointerdown:xt,pointermove:Et,pointerup:Tt,pointercancel:It,pointerout:It},Vt={2:bt,3:wt,4:St,5:Ct},Ht="pointerdown",Wt="pointermove pointerup pointercancel";t.MSPointerEvent&&(Ht="MSPointerDown",Wt="MSPointerMove MSPointerUp MSPointerCancel"),l(j,x,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=Qt[n],a=Vt[t.pointerType]||t.pointerType,s=a==bt,o=y(e,t.pointerId,"pointerId");r&xt&&(0===t.button||s)?0>o&&(e.push(t),o=e.length-1):r&(Tt|It)&&(i=!0),0>o||(e[o]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:a,srcEvent:t}),i&&e.splice(o,1))}});var Bt={touchstart:xt,touchmove:Et,touchend:Tt,touchcancel:It},$t="touchstart",Yt="touchstart touchmove touchend touchcancel";l(N,x,{handler:function(t){var e=Bt[t.type];if(e===xt&&(this.started=!0),this.started){var i=Q.call(this,t,e);e&(Tt|It)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:bt,srcEvent:t})}}});var Ut={touchstart:xt,touchmove:Et,touchend:Tt,touchcancel:It},Xt="touchstart touchmove touchend touchcancel";l(V,x,{handler:function(t){var e=Ut[t.type],i=H.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:bt,srcEvent:t})}}),l(W,x,{handler:function(t,e,i){var n=i.pointerType==bt,r=i.pointerType==St;if(n)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;e&(Tt|It)&&(this.mouse.allow=!0),this.callback(t,e,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Zt=S(lt.style,"touchAction"),Gt=Zt!==n,Jt="compute",Kt="auto",te="manipulation",ee="none",ie="pan-x",ne="pan-y";B.prototype={set:function(t){t==Jt&&(t=this.compute()),Gt&&(this.manager.element.style[Zt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return s(this.manager.recognizers,function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Y(t.join(" "))},preventDefaults:function(t){if(!Gt){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,r=v(n,ee),a=v(n,ne),s=v(n,ie);return r||a&&i&qt||s&&i&At?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var re=1,ae=2,se=4,oe=8,ue=oe,le=16,ce=32;U.prototype={defaults:{},set:function(t){return o(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(a(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=G(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return a(t,"dropRecognizeWith",this)?this:(t=G(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(a(t,"requireFailure",this))return this;var e=this.requireFail;return t=G(t,this),-1===y(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(a(t,"dropRequireFailure",this))return this;t=G(t,this);var e=y(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(i.options.event+(e?X(n):""),t)}var i=this,n=this.state;oe>n&&e(!0),e(),n>=oe&&e(!0)},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=ce)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(ce|re)))return!1;t++}return!0},recognize:function(t){var e=o({},t);return d(this.options.enable,[this,e])?(this.state&(ue|le|ce)&&(this.state=re),this.state=this.process(e),void(this.state&(ae|se|oe|le)&&this.tryEmit(e))):(this.reset(),void(this.state=ce))},process:function(){},getTouchAction:function(){},reset:function(){}},l(J,U,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(ae|se),r=this.attrTest(t);return n&&(i&It||!r)?e|le:n||r?i&Tt?e|oe:e&ae?e|se:ae:ce}}),l($,J,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pt},getTouchAction:function(){var t=this.options.direction,e=[];return t&qt&&e.push(ne),t&At&&e.push(ie),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,a=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&qt?(r=0===a?Dt:0>a?kt:Mt,i=a!=this.pX,n=Math.abs(t.deltaX)):(r=0===s?Dt:0>s?Lt:_t,i=s!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return J.prototype.attrTest.call(this,t)&&(this.state&ae||!(this.state&ae)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Z(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),l(K,J,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ae)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),l(tt,U,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Kt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,a=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(Tt|It)&&!a)this.reset();else if(t.eventType&xt)this.reset(),this._timer=r(function(){this.state=ue,this.tryEmit()},e.time,this);else if(t.eventType&Tt)return ue;return ce},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ue&&(t&&t.eventType&Tt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ft(),this.manager.emit(this.options.event,this._input)))}}),l(et,J,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ae)}}),l(it,J,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:qt|At,pointers:1},getTouchAction:function(){return $.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(qt|At)?e=t.velocity:i&qt?e=t.velocityX:i&At&&(e=t.velocityY),this._super.attrTest.call(this,t)&&i&t.direction&&t.distance>this.options.threshold&&ht(e)>this.options.velocity&&t.eventType&Tt},emit:function(t){var e=Z(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(nt,U,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[te]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,a=t.deltaTime<e.time;if(this.reset(),t.eventType&xt&&0===this.count)return this.failTimeout();if(n&&a&&i){if(t.eventType!=Tt)return this.failTimeout();var s=this.pTime?t.timeStamp-this.pTime<e.interval:!0,o=!this.pCenter||A(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t;var u=this.count%e.taps;if(0===u)return this.hasRequireFailures()?(this._timer=r(function(){this.state=ue,this.tryEmit()},e.interval,this),ae):ue}return ce},failTimeout:function(){return this._timer=r(function(){this.state=ce},this.options.interval,this),ce},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ue&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),rt.VERSION="2.0.4",rt.defaults={domEvents:!1,touchAction:Jt,enable:!0,inputTarget:null,inputClass:null,preset:[[et,{enable:!1}],[K,{enable:!1},["rotate"]],[it,{direction:qt}],[$,{direction:qt},["swipe"]],[nt],[nt,{event:"doubletap",taps:2},["tap"]],[tt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var de=1,he=2;at.prototype={set:function(t){return o(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?he:de},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&ue)&&(r=e.curRecognizer=null);for(var a=0;a<n.length;)i=n[a],e.stopped===he||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(ae|se|oe)&&(r=e.curRecognizer=i),a++}},get:function(t){if(t instanceof U)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(a(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(a(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(y(e,t),1),this.touchAction.update(),this},on:function(t,e){var i=this.handlers;return s(m(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},off:function(t,e){var i=this.handlers;return s(m(t),function(t){e?i[t].splice(y(i[t],e),1):delete i[t]}),this},emit:function(t,e){this.options.domEvents&&ot(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&st(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(rt,{INPUT_START:xt,INPUT_MOVE:Et,INPUT_END:Tt,INPUT_CANCEL:It,STATE_POSSIBLE:re,STATE_BEGAN:ae,STATE_CHANGED:se,STATE_ENDED:oe,STATE_RECOGNIZED:ue,STATE_CANCELLED:le,STATE_FAILED:ce,DIRECTION_NONE:Dt,DIRECTION_LEFT:kt,DIRECTION_RIGHT:Mt,DIRECTION_UP:Lt,DIRECTION_DOWN:_t,DIRECTION_HORIZONTAL:qt,DIRECTION_VERTICAL:At,DIRECTION_ALL:Pt,Manager:at,Input:x,TouchAction:B,TouchInput:V,MouseInput:R,PointerEventInput:j,TouchMouseInput:W,SingleTouchInput:N,Recognizer:U,AttrRecognizer:J,Tap:nt,Pan:$,Swipe:it,Pinch:K,Rotate:et,Press:tt,on:f,off:p,each:s,merge:u,extend:o,inherit:l,bindFn:c,prefixed:S}),typeof define==ct&&define.amd?define(function(){return rt}):"undefined"!=typeof module&&module.exports?module.exports=rt:t[i]=rt}(window,document,"Hammer"),function(t){"function"==typeof define&&define.amd?define(["jquery","hammerjs"],t):"object"==typeof exports?t(require("jquery"),require("hammerjs")):t(jQuery,Hammer)}(function($,t){function e(e,i){var n=$(e);n.data("hammer")||n.data("hammer",new t(n[0],i))}$.fn.hammer=function(t){return this.each(function(){e(this,t)})},t.Manager.prototype.emit=function(t){return function(e,i){t.call(this,e,i),$(this.element).trigger({type:e,gesture:i})}}(t.Manager.prototype.emit)});var Site=Site||{};Site.init=function($){"use strict";var t={};return t.init=function(){$(document).ready(function(){Site.utils.init(),Site.events.init(),Site.analytics.init(),Site.layout.init(),Site.navigation.init(),Site.images.init(),Site.media.init(),Site.showhide.init(),Site.carousel.init(),Site.modal.init(),Site.loading.init(),Site.panelslider.init(),Site.forms.init(),Site.tabs.init()})},t.init()}(jQuery);var Site=Site||{};Site.utils=function($){"use strict";var t=!0,e=function(e){t===!0&&window.console&&console.log&&console.log(e)},i=function(t){var e=t,i=0,n=0;return $(e).css("min-height",""),$(e).each(function(){n=$(this).height(),n>i&&(i=n)}),i},n=function(t){var e=t,n=i(e);i(e),$(e).css("min-height",n)},r=function(){var t=document.createElement("input");return"placeholder"in t},a=function(){for(var t=[],e,i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),n=0;n<i.length;n++)e=i[n].split("="),t.push(e[0]),t[e[0]]=e[1];return t},s=function(t){var e=$(t),i=$(window),n=i.height(),r=i.scrollTop(),a=e.offset(),s=a.top,o=e.height();return r+n>s&&s+o>r?!0:s+o>r&&r+n>s+o?!0:!1},o=function(t){$(t).removeAttr("style")},u=function(t){var e=$(t);e.filter(":nth-child(2n-1)").addClass("odd"),e.filter(":nth-child(2n)").addClass("even")},l=function(){Site.utils.cl("Site.utils.init called")};return{cl:e,resetStyles:o,equaliseMinHeights:n,placeholderIsSupported:r,getURLQueryString:a,isElementInView:s,addOddAndEvenClasses:u,init:l}}(jQuery);var Site=Site||{};Site.events=function($){"use strict";var t=$("body").eq(0),e=function(){$(window).on("scroll",function(){$.publish("page/scroll")}),$(window).on("debouncedresize",function(){$.publish("page/resize")})},i=function(e,i,n,r){t.on(e,i,function(t){r&&t.preventDefault(),$.publish(n,t)})},n=function(e,i,n){t.on(e,i,function(t){t.preventDefault(),t.stopPropagation(),$(t.target).trigger(n)})},r=function(){Site.utils.cl("Site.events initialised"),e()};return{init:r,delegate:n,global:i}}(jQuery);var Site=Site||{};Site.analytics=function($){"use strict";var t={},e=new RegExp("^((f|ht)tps?:)?//(?!"+location.host+")"),i="a.external",n="modalLinkExternal",r=function(t){var i=$(t),r=i.attr("href"),a,o=function(){a=e.test(r)?"external":"local",i.addClass(a)},u=function(){Site.utils.cl("track outbound link..."),i.hasClass(n)?s("Outbound Link","modal",r):(s("Outbound Link","click",r),void 0===i.attr("target")||"_blank"!==i.attr("target").toLowerCase()?setTimeout(function(){location.href=r},400):window.open(r,"_blank"))},l=function(){i.on("trackExternalLink",function(t){t.preventDefault(),u()})},c=function(){};this.init=function(){l(),c(),o()}},a=function(t){var e=t;"undefined"!=typeof ga?ga("send","pageview",e):"undefined"!=typeof _gaq?_gaq.push(["trackPageview"],t):Site.utils.cl("Google Analytics not available")},s=function(t,e,i){var n=t,r=e,a=i;"undefined"!=typeof ga?ga("send","event",n,r,a):"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent",n,r,a])},o=function(){$("a[href$='pdf']").on("click",function(){Site.utils.cl("PDF link tracked");var t=$(this).attr("href");a(t)})},u=function(t){var e=$(window).width(),i;i=e>768?"Desktop":e>520?"Tablet":"Phone","undefined"!=typeof ga?ga("set","dimension1",i):"undefined"!=typeof _gaq&&_gaq.push(["_setCustomVar",t,"Layout",i,3])},l=function(){},c=function(t){"undefined"!=typeof ga||"undefined"!=typeof _gaq&&_gaq.push(["_deleteCustomVar",t])},d=function(){Site.events.delegate("click",i,"trackExternalLink")},h=function(t){var e=new r(t);e.init()},f=function(){Site.utils.cl("Site.analytics.init called"),o(),d()};return{init:f,trackPageView:a,trackPageEvent:s,trackPageLoadInformation:l,deleteCustomVariable:c,createPageLink:h}}(jQuery);var Site=Site||{};Site.carousel=function($){"use strict";var t="[data-carousel=component]",e="[data-carousel=slides]",i="[data-carousel=slide]",n="[data-carousel=slide]:first-child",r="[data-carousel=controls] .index",a="[data-carousel=controls]",s="[data-carousel=component] [data-action]",o="[data-carousel=component] [data-carousel=slide]",u="[data-carousel=component] [data-index]",l=".cp_Carousel--icon",c=function(t){var s=$(t),o=s.attr("id")||"unidentified",u=s.find(e).eq(0),c=s.find(i),d=c.length,h=s.data("carousel-config"),f=h.interval||5e3,p=h.mode||"scroll",g=h.transition||1e3,v=h.autoplay||!1,m,y,b,w,S,C,F,x=s.find(r).eq(0),E=!1,T=!0,I=h.maxScroll||4,D=!0,k,M,L,_,q=function(){v&&(C=setTimeout(function(){H("n")},f))},A=function(){v=!1,clearTimeout(C)},P=function(){if(x){var t=!1;s.hasClass(l)&&(t=!0),c.each(function(e){var i;if($(this).attr("data-slide-index",e),t){var n=$(this).find(".indexIcon").html();i=void 0!==n?$('<div class="indexItem"><span data-index="'+e+'">'+n+"</span></div>"):""}else i=$('<div class="indexItem"><span data-index="'+e+'">'+e+"</span></div>");x.append(i)}),O(0)}},O=function(){x.find(".indexItem").removeClass("current"),"scroll"===p?x.find(".indexItem").eq(s.find(".slide").eq(0).data("slide-index")).addClass("current"):"fade"===p&&x.find(".indexItem").eq(s.find(".slide.current").eq(0).data("slide-index")).addClass("current")},z=function(){E=!1,q(),O()},R=function(){"scroll--modern"===p&&(m=c.eq(0).addClass("current"),y=c.eq(1).addClass("next"),$prevSlide=c.last().addClass("previous")),k=u.width(),M=$(i,s).eq(0).width(),L=Math.round(k/M),L>I&&(L=I),_=L*M,L>I&&(L=I),d>L?($(a,s).show(),D=!0):($(a,s).hide(),D=!1)},j=function(t){var e;E===!1&&(E=!0,"n"===t?(e=$(i,s).slice(0,L).clone(),$.publish("content/change",e),u.append(e),T===!1?($(i,s).slice(0,L).remove(),z()):$(n,u).animate({marginLeft:[-_,"easeInOutQuad"]},g,function(){$(this).css("margin-left","auto"),$(i,s).slice(0,L).remove(),z()})):"p"===t&&(e=$(i,s).slice(-L).clone(),$.publish("content/change",e),T===!1?(u.prepend(e),$(i,s).slice(-L).remove(),z()):($(e).eq(0).css("margin-left",-_),u.prepend(e),$(n,u).animate({marginLeft:[0,"easeInOutQuad"]},g,function(){$(this).css("margin-left","auto"),$(i,s).slice(-L).remove(),z()}))))},N=function(t){var e=c.index(m);E===!1&&(E=!0,"n"===t?(y.removeClass("next"),m.removeClass("current"),$prevSlide.removeClass("previous"),$prevSlide=m.addClass("previous"),m=y.addClass("current"),y=e+2==d?b.addClass("next"):m.next().addClass("next")):"p"===t&&(y.removeClass("next"),m.removeClass("current"),$prevSlide.removeClass("previous"),y=m.addClass("next"),m=$prevSlide.addClass("current"),1===e?$prevSlide=w.addClass("previous"):$prevSlide=m.prev().addClass("previous")),z())},Q=function(t){var e=t,i=c.index(m);E===!1&&(E=!0,e!==i?(y=c.eq(e),y.addClass("next"),y.fadeIn(g,function(){m.removeClass("current"),y.addClass("current").removeClass("next"),Site.utils.resetStyles(y),m=y,z()})):E=!1)},V=function(t){var e=t,i=c.index(m);E===!1&&(E=!0,"n"===t?d>i+1?(y=m.next(),y.addClass("next")):(y=b,y.addClass("next")):"p"===t&&(i>0?(y=m.prev(),y.addClass("next")):(y=w,y.addClass("next"))),y.fadeIn(g,function(){m.removeClass("current"),y.addClass("current").removeClass("next"),Site.utils.resetStyles(y),m=y,z()}))},H=function(t){E||("fade"===p?t===parseInt(t,10)?Q(t):V(t):"scroll"===p?j(t):"scroll--modern"===p&&N(t))},W=function(){v?(v=!1,clearTimeout(C)):(v=!0,q())},B=function(){s.on("toggleautocycle",function(t){t.preventDefault(),W()}),s.on("controlclicked",function(t){if(t.preventDefault(),A(),void 0!==$(t.target).attr("data-action")){H($(t.target).attr("data-action"));var e;e="n"===$(t.target).attr("data-action")?"Next":"Previous",Site.analytics.trackPageEvent("Carousel: "+o,"Carousel advanced","Direction: "+e)}}),s.on("nextslide",function(t){t.preventDefault(),D&&(H("n"),A(),Site.analytics.trackPageEvent("Carousel: "+o,"Carousel advanced with touch swipe","Direction: Next"))}),s.on("prevslide",function(t){t.preventDefault(),D&&(H("p"),A(),Site.analytics.trackPageEvent("Carousel: "+o,"Carousel advanced with touch swipe","Direction: Previous"))}),s.on("indexclicked",function(t){t.preventDefault(),A(),H($(t.target).data("index")),Site.analytics.trackPageEvent("Carousel: "+o,"index control clicked","slide: "+($(t.target).data("index")+1))}),s.on("updateLayout",function(t){t.preventDefault(),R()}),Modernizr.touch&&s.hammer({domEvents:!0})},Y=function(){$.subscribe("page/resize",function(){$(this).trigger("updateLayout")},s),$.subscribe("page/loaded",function(){$(this).trigger("updateLayout")},s),$.subscribe("layout/change",function(){$(this).trigger("updateLayout")},s)},U=function(){s.addClass(p),"fade"===p?(b=c.eq(0),w=c.eq(c.length-1),m=b,S=m.height(),m.addClass("current"),P(),O()):"scroll"===p?(R(),P(),O()):"scroll--modern"===p&&(c=s.find(i),$.publish("content/change",c),b=c.first(),w=c.last(),d=c.length,R()),B(),Y(),q(),$.publish("page/resize")};this.init=function(){U()}},d=function(){Site.events.delegate("click",s,"controlclicked"),Site.events.delegate("click",u,"indexclicked"),Modernizr.touch&&(Site.events.delegate("swipeleft",o,"nextslide"),Site.events.delegate("swiperight",o,"prevslide"))},h=function(){Site.utils.cl("Site.carousel initialised"),$(t).each(function(){var t=new c(this);t.init()}),d()};return{init:h}}(jQuery);var Site=Site||{};Site.filter=function($){"use strict";var t="[data-plugin=filter]",e="[data-filter=controls]",i="[data-filter-target]",n="[data-filter=section]",r="[data-plugin=filter] [data-filter-target]",a=500,s=function(t){var e=$(t),r=e.find(i),s=r.filter(".showAll"),o=e.find(n),u=function(t){var e="#"+t.data("filter-target"),i=o.filter(e),n=o.not(e);r.removeClass("active"),i.slideDown(a,"easeInOutQuad"),n.slideUp(a,"easeInOutQuad"),t.addClass("active")},l=function(){o.each(function(){$(this).slideDown(a,"easeInOutQuad",function(){$(this).removeClass("activeContent")})}),e.removeClass("filterActive"),r.removeClass("active"),s.addClass("active")},c=function(){e.on("toggleFilter",function(t){t.preventDefault(),$(t.target).hasClass("active")||$(t.target).hasClass("showAll")?l():u($(t.target)),Site.analytics.trackPageEvent("Price Category Filter","Category Changed","Category: "+$(t.target).parent().attr("id"))})},d=function(){};this.init=function(){c(),d()}},o=function(){Site.events.delegate("click",r,"toggleFilter")},u=function(){$(t).each(function(){var t=new s(this);t.init()}),o()};return{init:u}}(jQuery);var Site=Site||{};Site.forms=function($){"use strict";var t,e="input[type=file]",i=function(){var t='<span class="fileUpload">',e=function(e){var i=$(e.target),n=i.prev(),r;Site.utils.cl(i),n.length>0||(n=$(t),i.before(n)),r=i.val().split("\\").pop(),n.text(r),a()},i=function(){},n=function(){$.subscribe("fileupload/change",function(t,i){e(i)})};this.init=function(){i(),n()}},n=function(){$(".form-item").each(function(){var t=$(this).find("input, textarea").not("input[type=submit]").eq(0),e=$(this).find("label").eq(0),i=$(e).text(),n=$(i).find(".form-required");i=$(e).text(),$(t).attr("placeholder",i)}),t=Site.utils.placeholderIsSupported(),t||r()},r=function(){var e=function(t,e){(e.attr("value")===t||0===e.attr("value").length)&&(e.attr("value",t),e.addClass("empty"))},i=function(t,e){var i=e.attr("value");i===t&&(e.attr("value",""),e.removeClass("empty"))},n=function(t,e){var i=e.attr("value");void 0!==i&&""!==i?e.attr("value",i):(void 0===i||""===i)&&(e.attr("value",t),e.addClass("empty"))};Site.utils.cl(t),t||(Site.utils.cl("Placeholder not supported"),$("input[placeholder], textarea[placeholder]").each(function(){var t=$(this).attr("placeholder");$(this).each(function(){e(t,$(this))}),$(this).focus(function(){i(t,$(this))}),$(this).blur(function(){n(t,$(this))})}))},a=function(){$.validator.addMethod("exactlength",function(t,e,i){return this.optional(e)||t.length==i}),jQuery.extend(jQuery.validator.messages,{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL."}),jQuery.validator.addMethod("require_from_group",function(t,e,i){var n=this,r=i[1],a=jQuery(r,e.form).filter(function(){return n.elementValue(this)}).length>=i[0];if(!jQuery(e).data("being_validated")){var s=jQuery(r,e.form);s.data("being_validated",!0),s.valid(),s.data("being_validated",!1)}return a},jQuery.validator.format("Which type of model would you like to be? Please select at least one option from the list.")),$("form").length>0&&$(".cp_Form form, .cp_Forms form").each(function(){$(this).validate({groups:{modelCheckboxes:"field_user_levels[gents] field_user_levels[long_hair] field_user_levels[cut] field_user_levels[colour]"},rules:{mail:{required:!0,email:!0},"files[field_user_photograph]":{required:!0,accept:"image/jpeg, image/pjpeg, image/png"},
"field_user_levels[gents]":{require_from_group:[1,".form-checkboxes input"]},"field_user_levels[long_hair]":{require_from_group:[1,".form-checkboxes input"]},"field_user_levels[cut]":{require_from_group:[1,".form-checkboxes input"]},"field_user_levels[colour]":{require_from_group:[1,".form-checkboxes input"]}},messages:{mail:{required:"Please enter your email so we can get in touch with you"},"files[field_user_photograph]":{required:"We'd love to see what look you're currently rocking",accept:"Sorry, please pick an image"}},errorPlacement:function(t,e){t.appendTo(e.is(":file")?$(".form-type-managed-file"):e.closest(".form-checkboxes").length>0?e.closest(".form-checkboxes"):e.parent())}})})},s=function(){Site.events.global("change",e,"fileupload/change",!1)},o=function(){Site.utils.cl("Site.forms initialised"),a(),s();var t=new i;t.init()};return{init:o}}(jQuery);var Site=Site||{};Site.grid=function($){"use strict";var t={},e="[data-plugin=shgrid]",i="[data-shgrid=cell]",n="[data-plugin=shgrid] [data-shgrid=cell] [data-shgrid=headline]",r="[data-shgrid=content]",a='<div class="cpProfileWindow cp" data-shgrid="window"><div class="in profileInfo"></div></div>',s="[data-shgrid=window]",o=300,u=".gdFlexCell .in",l=375/640,c=750/640,d=function(t){var e=$(t),n=e.find(i),u,l=function(t){var e=$(window).width(),i=$(t).width(),n=Math.round(e/i);return n},c=function(t){var e=t,i=parseInt(n.index(e)+1),r=l(e),a=Math.ceil(i/r)*r,s=a-1;return s>=n.length&&(s=n.length-1),s},d=function(t){var e=t,i=e.indexOf("#"),n,r;return i>0?(n=e.substring(i+1),r=n):r="",r},h=function(){var t=e.find(s);t.length>0&&(Site.utils.cl("current window so update layout"),t.insertAfter(n.eq(c(u))))},f=function(t){var e=t.offset().top,i=$(window).scrollTop();(i>e||"small"===Site.layout.getResponsiveSize())&&$("html, body").animate({scrollTop:e},o)},p=function(t){var e=t.offset().top,i=$(window).scrollTop();$("html, body").scrollTop(e)},g=function(t){var i=t,d=e.find(s),h=i.find(r).clone(),p=$(a),g=l(i);if(Site.utils.cl(g),i.hasClass("isCurrent"))i.removeClass("isCurrent"),e.removeClass("isActive"),g>1?d.slideUp(function(){$(this).remove()}):d.remove(),u=!1;else{if(n.filter(".isCurrent").removeClass("isCurrent"),i.addClass("isCurrent"),e.addClass("isActive"),u=i,d.length>0){var v=d.prev();n.index(v)===c(i)?(d.find(".profileInfo").empty().append(h),f(i)):(g>1?d.slideUp(o,function(){$(this).remove()}):d.remove(),p.insertAfter(n.eq(c(i))),p.find(".profileInfo").append(h),g>1?p.slideDown(o,function(){f(i)}):(p.show(),f(i)))}else p.insertAfter(n.eq(c(i))),p.find(".profileInfo").append(h),g>1?p.slideDown(o,function(){f(i)}):(p.show(),f(i));var m=i.find(".profileDetails .name").text();Site.analytics.trackPageEvent("Staff Page","Show profile",m)}},v=function(){var t=Site.utils.getURLQueryString(),e;if(Site.utils.cl(t),t.person){Site.utils.cl(t.person),e="#"+t.person,$(e).trigger("toggle");var i=window.location.toString();if(i.indexOf("?")>0){var n=i.substring(0,i.indexOf("?"));window.history.replaceState&&window.history.replaceState({},document.title,n)}}},m=function(){var t=e.find(".isCurrent");Site.utils.cl(t),1===t.length&&p(t)},y=function(){e.on("toggle",function(t){t.preventDefault();var e=$(t.target).closest(i);g(e)}),e.on("updatelayout",function(t){t.preventDefault(),h()}),e.on("setposition",function(t){t.preventDefault(),m()})},b=function(){$.subscribe("debouncedresize",function(){$(this).trigger("updatelayout")},e),$.subscribe("pageload",function(){$(this).trigger("setposition")},e)};this.init=function(){y(),b(),v()}},h=function(t){var e=$(t),i=e.width(),n,r=function(){i=e.outerWidth(),n=i*l,e.css("min-height",n)},a=function(){e.on("updatelayout",function(t){t.preventDefault(),r()})},s=function(){$.subscribe("debouncedresize",function(){$(this).trigger("updatelayout")},e)};this.init=function(){r(),a(),s()}},f=function(){Site.events.delegate("click",n,"toggle")},p=function(){return l},g=function(){Site.utils.cl("Site.grid initialised"),$(e).each(function(){var t=new d(this);t.init()}),$(u).each(function(){var t=new h(this);t.init()}),f()};return{init:g,getSingleCellRatio:p}}(jQuery);var Site=Site||{};Site.images=function($){"use strict";var t={},e="[data-image-load]",i=function(t){var e=$(t),i=e.find("> img").eq(0),n=e.data("image-load"),r=e.data("image-config"),a=r.type||"inline",s=r.reload||!1,o=e.data("image-target")||null,u=!1,l=new Image,c=function(t){var n=$(t),r=e.data("alt")||"image";r.length>0&&n.attr("alt",r),i.length>0?i.attr("src",n.attr("src")).removeClass("placeholder").removeAttr("width").removeAttr("height"):(null!==o?e.parent().find(o).eq(0).append(n):e.prepend(n),i=n),e.addClass("imageLoaded"),window.setTimeout(function(){e.addClass("imageDisplayed"),$.publish("content/update"),$.publish("image/loaded")},50),u=!0},d=function(t){var i="url("+t+")",n=e.data("position"),r=e.data("background-color");e.addClass("imageLoaded").css("background-image",i).addClass("flexImage").addClass(n).css("background-color",r),u=!0},h=function(){var t="src-"+Site.layout.getResponsiveSize(),i=e.data(t);"none"!==i&&(l.src=i,"inline"===a?$(l).imagesLoaded(c(l)).done(function(){$.publish("layout/change")}):"background"===a&&$(l).imagesLoaded(d(i)).done(function(){$.publish("layout/change")}))},f=function(){"inline"===a?!Site.utils.isElementInView(e)||u!==!1&&s!==!0||h(e):"background"===a&&(!Site.utils.isElementInView(e.parent())||u!==!1&&s!==!0||h(e))},p=function(){e.on("loadSmartImage",function(t){t.preventDefault(),u===!1&&f(e)}),e.on("reloadImage",function(t){t.preventDefault(),u===!0&&s===!0&&h(e)})},g=function(){"click"!==n&&"pageload"!==n&&($.subscribe("page/scroll",function(){$(this).trigger("loadSmartImage")},e),$.subscribe("page/resize",function(){$(this).trigger("loadSmartImage")},e),$.subscribe("layout/change",function(){$(this).trigger("loadSmartImage")},e),$.subscribe("page/load",function(){$(this).trigger("loadSmartImage")},e)),$.subscribe("breakpoint/change",function(){$(this).trigger("reloadImage")},e)};this.init=function(){"click"===n||("view"===n?f(e):"pageload"===n&&h(e)),p(),g()}},n=function(){var t=function(t){var n=$(t).find(e);$(n).each(function(){var t=new i(this);t.init()})},n=function(){$.subscribe("content/change",function(e,i){t(i)})};this.init=function(){n()}},r=function(){Site.events.delegate("click",".lazyLoader[data-image-load=click]","loadSmartImage")},a=function(){Site.utils.cl("Site.images initialised"),$(e).each(function(){var t=new i(this);t.init()});var t=new n;t.init(),r()};return{init:a}}(jQuery);var Site=Site||{};Site.layout=function($){"use strict";var t="small",e,i,n=function(){var i=function(e){t!==e?(t=e,$.publish("breakpoint/change")):t=e},n=function(){var n=$(window).width(),r={small:600,medium:800,large:1200,xlarge:1600};switch(!0){case!Modernizr.mq("only all"):t="static";break;case n<=r.small:e="small",i(e);break;case n<=r.medium:e="medium",i(e);break;case n<=r.large:e="large",i(e);break;case n<=r.xlarge:e="xlarge",i(e);break;case n>r.xlarge:e="xxlarge",i(e)}},r=function(){$.subscribe("page/resize",function(){n()})};this.init=function(){r(),n()}},r=function(){var t=".cpResult .result",e=function(){$(t).fitText(.4,{minFontSize:"100px",maxFontSize:"180px"})};this.init=function(){e()}},a=function(){var t=$(".stFooter").eq(0),e=!1,n=0,r=0,a=20,s=function(){r=$(document).scrollTop(),r>n+a?(n=r,"down"!==i&&($.publish("scroll/down"),i="down")):n-a>r&&(n=r,"up"!==i&&($.publish("scroll/up"),i="up"))},o=function(){t.length>0&&Site.utils.isElementInView(t)&&!e&&(e=!0,Site.analytics.trackPageEvent("Page Navigation","scroll","Footer reached"))},u=function(){$.subscribe("page/scroll",function(){s()})};this.init=function(){u()}},s=function(){var t={minireviews:{groupSel:".gp_MiniReviews",itemSel:".reviewText"}},e=function(){$.each(t,function(t,e){$(e.groupSel).each(function(){var t=$(this),i=t.find(e.itemSel);Site.utils.equaliseMinHeights(i)})})},i=function(){$.subscribe("page/resize",function(){e()})};this.init=function(){i(),e()}},o=function(){return t},u=function(){return i},l=function(t){i=t},c=function(){Site.utils.cl("Site.layout initialised");var t=new n;t.init();var e=new r;e.init();var i=new a;i.init();var o=new s;o.init()};return{init:c,getResponsiveSize:o,getScrollDirection:u,setScrollDirection:l}}(jQuery);var Site=Site||{};Site.loading=function($){"use strict";var t=$("body"),e=100,i=function(){var i=function(){t.addClass("pageLoaded"),$.publish("page/loaded")};this.init=function(){var t=setTimeout(i,e)}},n=function(){Site.utils.cl("Site.loading initialised");var t=new i(this);t.init()};return{init:n}}(jQuery);var Site=Site||{};Site.modal=function($){"use strict";var t="[data-modal=source]",e=".cp_Modal .close",i=".cp_Modal .continueLink a",n=".modalContent",r=".modalScreen",a='<div class="modalContent"><div id="confirmation-popup" class="cp_Modal"><div class="in modalContentContainer"><div class="close"><a href="#">Close</a></div></div></div></div>',s="<div class='modalScreen'></div>",o=$(window),u=$("body"),l="[data-modal=source]",c=function(t,i,n){var r=$(t),l=n,c=i,d=$(a),h=$(s),f=d.find(e),p=function(){"iframe"===c&&d.addClass("iframeModal"),d.find(".modalContentContainer").append(r),u.append(d).append(h),m()},g=function(){d.addClass("iframeModal"),d.find(".modalContentContainer").append(r),u.append(d).append(h),m(),$.publish("content/change",r)},v=function(){d.addClass("imageModal"),d.find(".modalContentContainer").append(r),u.append(d).append(h),m(),$.publish("content/change",r)},m=function(){var t=o.width(),e=o.height(),i=d.width(),n=d.height(),r=o.scrollTop(),a=(e-n)/2+r-10,s=t/2-i/2;0>a&&(a=0),0>s&&(s=0),d.css("top",a).css("left",s).addClass("displayed")},y=function(){d.addClass("imageLoaded"),m(),Site.analytics.trackPageEvent("Modal Image","Modal Opened","Image ID: "+l);var t=setTimeout(function(){m()},1e3)},b=function(){d.fadeOut(function(){d.empty(),d.remove()}),h.fadeOut(function(){h.remove()}),Site.analytics.trackPageEvent("Modal Image","Modal Closed","Image ID: "+l)},w=function(){d.on("closeModal",function(t){t.preventDefault(),b()}),d.on("updatelayout",function(t){t.preventDefault(),m()}),d.on("activateModal",function(t){t.preventDefault(),y()}),h.on("closeModal",function(t){t.preventDefault(),b()})},S=function(){$.subscribe("page/resize",function(){$(this).trigger("updatelayout")},d),$.subscribe("content/update",function(){$(this).trigger("updatelayout")},d),$.subscribe("page/scroll",function(){$(this).trigger("updatelayout")},d),$.subscribe("image/loaded",function(){$(this).trigger("activateModal")},d)};this.init=function(){p(),"inpage"===c?displayPageContentInModal():"image"===c?v():"iframe"===c&&g(),w(),S()}},d=function(){var t=$('<div class="modalImage">'),e=function(e){var n=$(e.target),r=n.attr("id")||"unidentified",a=n.attr("href"),s=$('<div class="image" data-image-load="pageload" data-image-config=\'{ "type" : "inline", "reload" : true }\' data-src-small="'+a+'" data-src-medium="'+a+'" data-src-large="'+a+'" data-src-xlarge="'+a+'" data-src-xxlarge="'+a+'" data-src-static="'+a+'">');t.empty(),t.append(s),i(r)},i=function(e){var i=new c(t,"image",e);i.init()},n=function(){$.subscribe("display/modal",function(t,i){e(i)})};this.init=function(){n()}},h=function(){Site.events.delegate("click",e,"closeModal"),Site.events.delegate("click",i,"closeModal"),Site.events.delegate("click",r,"closeModal"),Site.events.global("click",l,"display/modal",!0)},f=function(){Site.utils.cl("Site.modal initialised");var t=new d(this);t.init(),h()};return{init:f}}(jQuery);var Site=Site||{};Site.media=function($){"use strict";var t="[data-plugin=lazyVideo]",e="[data-plugin=lazyVideo] a",i=function(t){var e=$(t),i=e.attr("data-video-id"),n=e.find("a"),r=e.data("loading"),a=$('<object width="400" height="300" type="movie" data="http://www.youtube.com/v/'+i+'?version=3&amp;hl=en_US&amp;rel=0"><param name="movie" value="http://www.youtube.com/v/'+i+'?version=3&amp;hl=en_US&amp;rel=0"></param><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><embed src="http://www.youtube.com/v/'+i+'?version=3&amp;hl=en_US&amp;rel=0" type="application/x-shockwave-flash" width="560" height="315" allowscriptaccess="always" allowfullscreen="true"></embed></object>'),s=function(){$(n).remove(),e.append(a).addClass("videoLoaded")},o=function(){Site.utils.isElementInView(e)&&s()},u=function(){e.on("loadLazyMedia",function(t){t.preventDefault(),e.hasClass("videoLoaded")||o()})},l=function(){"click"!==r&&($.subscribe("page/scroll",function(){$(this).trigger("loadLazyMedia")},e),$.subscribe("page/resize",function(){$(this).trigger("loadLazyMedia")},e),$.subscribe("layout/change",function(){$(this).trigger("loadLazyMedia")},e),$.subscribe("page/load",function(){$(this).trigger("loadLazyMedia")},e))};this.init=function(){Site.utils.cl(r),"click"===r||("view"===r?o():s()),u(),l()}},n=function(){Site.events.delegate("click",e,"loadLazyMedia")},r=function(){$(t).each(function(){var t=new i(this);t.init()}),n()},a=function(){Site.utils.cl("Site.media initialised"),r()};return{init:a}}(jQuery);var Site=Site||{};Site.navigation=function($){"use strict";var t=$(window),e=$("html").eq(0),i=$("body").eq(0),n=".cp_MainNav",r=".wrapper",a=".nvToggle [data-action=toggle]",s="ul.menu",o=200,u="a.inPageLink",l="[data-plugin=inPageMenu]",c="[data-plugin=inPageMenu] li a:not(.action)",d="[data-plugin=inPageMenu] li a.action",h=".inPageAction a",f=$("[class*=cp_][id],[class*=rg_][id]"),p="[data-plugin=dropdown]",g="[data-action=toggle]",v=".menu",m=".menu > li",y="[data-plugin=dropdown] [data-action=toggle]",b=function(t){var e=$(t),n=e.find(s).eq(0),r=e.find("[data-action=toggle]").eq(0),a=Site.grid.getSingleCellRatio(),o,u,l=function(){i.hasClass("navVisible")===!0?i.removeClass("navVisible"):i.addClass("navVisible")},c=function(){i.hasClass("navVisible")===!0&&i.removeClass("navVisible")},d=function(){i.hasClass("navVisible")===!1&&i.addClass("navVisible")},h=function(){var t=$('<div class="cp_SlideMenu">').append(n.clone().addClass("mnSlide"));i.append(t)},f=function(){o=$(window).width(),u=o*a-r.height(),n.css("min-height",u)},p=function(){$.subscribe("page/resize",function(){$(this).trigger("updatelayout")},e),$.subscribe("navigation/close",function(){$(this).trigger("closeMainNav")},e)},g=function(){e.on("toggleMainNav",function(t){t.preventDefault(),l()}),e.on("openMainNav",function(t){t.preventDefault(),d()}),e.on("closeMainNav",function(t){t.preventDefault(),c()}),e.on("updatelayout",function(t){t.preventDefault()})};this.init=function(){g(),p(),h()}},w=function(t){var e=$(t),i=e.find(v),n=e.find(m),r=e.find(g),a=function(){e.hasClass("isOpen")===!0?(e.addClass("transitionToClosed"),i.slideUp(200,"easeInOutQuad",function(){e.removeClass("isOpen"),Site.utils.rs($(this)),e.removeClass("transitionToClosed")})):(e.addClass("transitionToOpen"),i.slideDown(200,"easeInOutQuad",function(){e.addClass("isOpen"),Site.utils.rs($(this)),e.removeClass("transitionToOpen")}))},s=function(){var t=n.find("a.active").eq(0).text();n.find("a.active").closest("li").addClass("current"),""===t&&(t="In this section"),r.text(t)},o=function(){},u=function(){e.on("toggleDropDown",function(t){t.preventDefault(),a()}),e.on("openDropDown",function(t){t.preventDefault(),openDropDown()}),e.on("closeDropDown",function(t){t.preventDefault(),closeDropDown()}),e.on("updatelayout",function(t){t.preventDefault()})};this.init=function(){u(),o(),s()}},S=function(i){var n=$(i),r=n.offset(),a=r.top,s=n.outerHeight(),o,u,c=function(){r=n.offset(),a=r.top},d=function(){var t=$(document).scrollTop(),e=!1;f.each(function(){var i=$(this),r=i.height(),a=i.offset();if(e===!1){var o=i.attr("id"),u=l+' a[href="'+window.location.pathname+"#"+o+'"]';t+s<a.top||t>a.top+r-s||(n.find("li a.current").removeClass("current"),$(u).addClass("current"),e=!0)}})},h=function(t){var e=t,i=e.indexOf("#"),n,r;return i>0?(n=e.substring(i+1),r=n):r="",r},p=function(){var i=t.height(),r=t.scrollTop();r>a?(e.addClass("fixedNav"),n.css("height",n.find(".in").eq(0).outerHeight())):e.hasClass("fixedNav")&&(e.removeClass("fixedNav"),Site.utils.resetStyles(n))},g=function(e,i){var n=s,r="#"+e,a=i,o,u,l;Site.analytics.trackPageEvent("In-page Navigation","Scroll to section",e),o=$(r).eq(0).position(),u=o.top,u>=t.scrollTop()?(u+=2,l=(u-t.scrollTop())/4):(u-=n-2,l=(t.scrollTop()-u)/4),a?$("html, body").animate({scrollTop:u},l):$("html, body").scrollTop(u),v()},v=function(){d(),p()},m=function(){n.on("updatelayout",function(t){t.preventDefault(),c()}),n.on("updateMenuState",function(t){t.preventDefault(),v()}),n.on("inpagelinkclicked",function(t){t.preventDefault(),g(h(t.target.href),!0)}),n.on("showMenu",function(t){t.preventDefault(),n.addClass("showMenu")}),n.on("hideMenu",function(t){t.preventDefault(),n.removeClass("showMenu")})},y=function(){$.subscribe("layout/change",function(){$(this).trigger("updatelayout")},n),$.subscribe("page/loaded",function(){$(this).trigger("updatelayout")},n),$.subscribe("page/resize",function(){$(this).trigger("updatelayout")},n),u&&($.subscribe("page/scroll",function(){$(this).trigger("updateMenuState")},n),$.subscribe("scroll/up",function(){$(this).trigger("showMenu")},n),$.subscribe("scroll/down",function(){$(this).trigger("hideMenu")},n))};this.init=function(){n.hasClass("cp_Nav--inpage")?u=!0:(u=!1,s=$(".cp_Nav--inpage .in").eq(0).outerHeight()),m(),y(),p(),n.find("a.action").each(function(){$(this).parent().addClass("action"),$(this).hasClass("action--alt")||$(this).closest("[class*=cp_]").addClass("hasAction")})}},C=function(t){var e=$(t),i=e.attr("href"),n=e.data("query"),r=function(t){var e=t,i=e.indexOf("#"),r,a,s;return i>0?(r=e.substring(0,i),a=e.substring(i+1),s=r+"?"+n+"="+a):s=e,s},a=function(){window.location=r(i)},s=function(){e.on("inpagelink",function(t){t.preventDefault(),a()})};this.init=function(){s()}},F=function(){Modernizr.touch?Site.events.delegate("click",a,"toggleMainNav"):Site.events.delegate("click",a,"toggleMainNav"),Site.events.delegate("click",u,"inpagelink"),Site.events.global("click",r,"navigation/close",!1)},x=function(){Site.utils.cl("Site.navigation initialised"),$(n).each(function(){var t=new b(this);t.init()}),$(p).each(function(){var t=new w(this);t.init()}),$(u).each(function(){var t=new C(this);t.init()}),F()};return{init:x}}(jQuery);var Site=Site||{};Site.showhide=function($){"use strict";var t={selPlugin:"[data-plugin=showhide]",selAction:"[data-plugin=showhide] [data-action=toggle]",selContent:"[data-content=showhide]"},e=function(e){var i=$(e),n=i.find(t.selContent).eq(0),r=i.data("plugin-config"),a=r.animate||!1,s=r.speed||200,o=r.open||!1,u=function(){$.publish("layout/change")},l=function(){i.hasClass("isClosed")?a===!0?(n.slideDown(s,function(){u()}),i.removeClass("isClosed").addClass("isOpen")):(n.show(),i.removeClass("isClosed").addClass("isOpen"),u()):a===!0?(n.slideUp(s,function(){u()}),i.addClass("isClosed").removeClass("isOpen")):(n.hide(),i.addClass("isClosed").removeClass("isOpen"),u())},c=function(){o===!1&&i.addClass("isClosed")},d=function(){i.on("toggleShowHide",function(t){t.preventDefault(),l()})};this.init=function(){d(),c()}},i=function(){Site.events.delegate("click",t.selAction,"toggleShowHide")},n=function(){Site.utils.cl("Site.showhide.init called"),$(t.selPlugin).each(function(){var t=new e(this);t.init()}),i()};return{init:n}}(jQuery);var Site=Site||{};Site.panelslider=function($){"use strict";var t='[data-plugin="panelslider"]',e=t+" .gp_Panel",i=".slider-control",n=".slider-control li a",r=!1,a=$(e).length,s='<li class="dot" data-nav-id="{id}"><a href="#"></a></li>',o=function(t){var e=$(t),n=function(){if(a!==$(".gp_Panel").length||!r)for(var t=0;a>t;t++){var e=s.replace("{id}",t+1);$(i+" ul").append(e)}0===a&&$(i+" ul").html(""),r=!0},o=function(t){$("html, body").stop().animate({scrollTop:$('div[data-panel-id="'+$(t).parent("li").attr("data-nav-id")+'"]').offset().top},600,"swing",function(){}),$(i+" .dot").hasClass("active")&&$(i+" .dot").removeClass("active"),$(t).parent("li").addClass("active")},u=function(){for(var t=$(window).height()/2,e=0;a>e;e++)if($(window).scrollTop()>$('div[data-panel-id="'+(e+1)+'"]').offset().top-t&&$(window).scrollTop()<$('div[data-panel-id="'+(e+1)+'"]').offset().top+t){$(i+" .dot").hasClass("active")&&$(i+" .dot").removeClass("active"),$(i+'  li[data-nav-id="'+(e+1)+'"]').addClass("active");var n=$('div[data-panel-id="'+(e+1)+'"]').attr("data-control-class");$(i).removeClass(function(t,e){return(e.match(/(^|\s)slider-control--\S+/g)||[]).join(" ")}),$(i).addClass(n)}},l=function(){e.on("slidechange",function(t){t.preventDefault(),t.stopPropagation(),o(t.target)}),e.on("scrollchange",function(){u()})},c=function(){$.subscribe("page/scroll",function(){$(this).trigger("scrollchange")},e)};this.init=function(){n(),u(),l(),c()}},u=function(){Site.events.delegate("click",n,"slidechange")},l=function(){Site.utils.cl("Site.panelslider initialised"),u(),$(t).each(function(){var t=new o(this);t.init()})};return{init:l}}(jQuery);var Site=Site||{};Site.tabs=function($){"use strict";var t="[data-tabs=plugin]",e="[data-tabs=panel]",i="[data-tabs=control]",n=".current[data-tabs=control]",r="[data-tabs=plugin] [data-tabs=control]",a="[data-tabs=plugin] [data-tabs=control]",s='<div class="cp_TabControls" data-tabs="controls"><a class="tabToggle" href="#" data-showhide-action="toggle"></a><div class="tabs"></div></div>',o='<a href="#" class="tabLink" data-tabs="control"></a>',u=function(t){var i=$(t),n=i.find(e),r=$(s),a=function(){n.each(function(){var t=$(this).data("title"),e=$(o);e.text(t),$(".tabs",r).append(e)}),$(i).prepend(r),i.addClass("tabbed"),n.eq(0).addClass("current"),$(".tabLink:first-child",r).addClass("current")},u=function(t){var e=$(t),i,a;i=$(t).hasClass("inner")?e.parent():e,a=i.index(),$(".current",r).removeClass("current"),n.removeClass("current"),i.addClass("current"),n.eq(a).addClass("current")},l=function(){i.on("updatestate",function(t){t.preventDefault(),u(t.target)})},c=function(){};this.init=function(){l(),c(),a()}},l=function(){Site.events.delegate("click",r,"updatestate")},c=function(){Site.utils.cl("Site.tabs initialised"),l(),$(t).each(function(){var t=new u(this);t.init()})};return{init:c}}(jQuery);
//# sourceMappingURL=./Site.min.js.map